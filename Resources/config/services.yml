imports:
  - { resource: ../../ClientType/Facebook/Resources/config/services.yml }

services:

  ### Controller ###

  Andreo\OAuthClientBundle\Controller\ClientArgumentResolver:
    public: false
    arguments:
      - !tagged_locator { tag: andreo.oauth_client.client, index_by: name }
    tags:
      - { name: controller.argument_value_resolver, priority: 1500 }

  Andreo\OAuthClientBundle\Controller\AuthorizationController:
    public: false
    tags: [controller.service_arguments]

  Andreo\OAuthClientBundle\Controller\AuthorizationControllerInterface:
    alias: Andreo\OAuthClientBundle\Controller\AuthorizationController


  ### Middleware ###

  Andreo\OAuthClientBundle\Middleware\SetZoneResponseMiddleware:
    public: false
    arguments:
      - '@router'

  Andreo\OAuthClientBundle\Middleware\ValidateReturningStateMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\CreateURIsMiddleware:
    public: false
    arguments:
      - '@router'

  Andreo\OAuthClientBundle\Middleware\StoreStateMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\AuthorizationMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\CheckCookieAccessTokenMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\MiddlewareAggregate:
    public: false
    arguments:
      -
        - ['@Andreo\OAuthClientBundle\Middleware\SetZoneResponseMiddleware', 4000]
        - ['@Andreo\OAuthClientBundle\Middleware\ValidateReturningStateMiddleware', 3000]
        - ['@Andreo\OAuthClientBundle\Middleware\CreateURIsMiddleware', 2000]
        - ['@Andreo\OAuthClientBundle\Middleware\StoreStateMiddleware', 1000]
        - ['@Andreo\OAuthClientBundle\Middleware\AuthorizationMiddleware', 0]
