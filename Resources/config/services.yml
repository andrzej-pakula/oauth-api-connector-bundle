imports:
  - { resource: ../../ClientType/Facebook/Resources/config/services.yml }

services:

  ### Controller ###

  Andreo\OAuthClientBundle\Controller\ClientArgumentResolver:
    public: false
    arguments:
      - !tagged_locator { tag: andreo.oauth_client.client, index_by: name }
    tags:
      - { name: controller.argument_value_resolver, priority: 1500 }

  Andreo\OAuthClientBundle\Controller\AuthenticationController:
    public: false
    tags: [controller.service_arguments]

  Andreo\OAuthClientBundle\Controller\AuthenticationControllerInterface:
    alias: Andreo\OAuthClientBundle\Controller\AuthenticationController


  ### Middleware ###

  Andreo\OAuthClientBundle\Middleware\HandleZoneResponseMiddleware:
    public: false
    arguments:
      - '@router'

  Andreo\OAuthClientBundle\Middleware\ValidateReturningStateMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\BuildURIsMiddleware:
    public: false
    arguments:
      - '@router'

  Andreo\OAuthClientBundle\Middleware\StoreStateMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\AuthenticationRedirectMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\CheckCookieAccessTokenMiddleware:
    public: false

  Andreo\OAuthClientBundle\Middleware\MiddlewareAggregate:
    public: false
    arguments:
      -
        - ['@Andreo\OAuthClientBundle\Middleware\HandleZoneResponseMiddleware', 4000]
        - ['@Andreo\OAuthClientBundle\Middleware\ValidateReturningStateMiddleware', 3000]
        - ['@Andreo\OAuthClientBundle\Middleware\BuildURIsMiddleware', 2000]
        - ['@Andreo\OAuthClientBundle\Middleware\StoreStateMiddleware', 1000]
        - ['@Andreo\OAuthClientBundle\Middleware\AuthenticationRedirectMiddleware', 0]
